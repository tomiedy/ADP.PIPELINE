function createToken(a, b, c, d) { $.ajax({ url: "/Permohonan/GenerateKeyJson", data: { idPermohonan: a, noHp: b, email: c, nmPelayanan: d }, type: "POST", dataType: "JSON", beforeSend: function () { $.blockUI({ css: { border: "none", padding: "15px", backgroundColor: "#000", "-webkit-border-radius": "10px", "-moz-border-radius": "10px", opacity: .5, color: "#fff" } }) }, complete: function () { $.unblockUI() }, success: function (a) { a.redirect ? (OpenToastAutoMessage(a.Message), window.location.href = a.returnUrl, $.blockUI({ css: { border: "none", padding: "15px", backgroundColor: "#000", "-webkit-border-radius": "10px", "-moz-border-radius": "10px", opacity: .5, color: "#fff" } })) : errorToast(a.Message) } }) } function printDiv(a) { var b = document.getElementById("print").innerHTML, c = document.body.innerHTML; document.body.innerHTML = "<html><head><title></title></head><body>" + b + "</body>", window.print(), document.body.innerHTML = c } var controlToValidate = []; $(document).ready(function () { controlToValidate.push($("#noHp")); var a = $("#IdPermohonan").val(), b = $("#NamaPelayanan").val(); OpenToastDefaultMessage("Mohon untuk menyimpan atau mencetak No. Permohonan ini : " + a + " , ini berguna untuk proses berikutnya."), $("#btnCreateToken").on("click", function (c) { var d = $("#noHp").val(), e = $("#txtEmail").val(), f = IsControlTitleTextRequired(controlToValidate); f && (null != e && "" != e ? IsValidEmailAddress(e) && createToken(a, d, e, b) : createToken(a, d, e, b)) }) });